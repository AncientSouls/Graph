{"version":3,"sources":["../src/lib/graph.js"],"names":["factoryGraph","ParentClass","Graph","collection","fields","config","arguments","insert","prototype","Error","update","remove","query","options","fetch","each","map","on","link","callback","context","selector","modifier","event"],"mappings":"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","file":"graph.js","sourcesContent":["/**\n * This method allows you to use Graph class to its inheritance chain.\n *\n * @param {Class} ParentClass\n * @return {Class} Graph\n */\nfunction factoryGraph(ParentClass) {\n  \n  if (!ParentClass) {\n    var ParentClass = class {}\n  }\n  \n  /**\n   * Class to inherit. Class with methods for control links in graph.\n   * Must be completed for adaptation to a particular database.\n   * \n   * @class\n   * @description `import { Graph } from 'ancient-graph';`\n   */\n  class Graph extends ParentClass {\n    \n    /**\n     * Construct new graph and checks for required adaptation methods.\n     * @throws {Error} if the adapter methods is not complete\n     * \n     * @param {} collection - A pointer to the collection dannymineobhodimye daapteru to work with the graph. This may be a connection to the SQL database and table name, for example, or a collection of Mongo. \n     * @param {Object} fields - Comparison of the data in the collection of data in the graph. It is necessary for the adapter.\n     * @param {Object} [config] - Additional config.\n     */\n    constructor(collection, fields, config) {\n      super(...arguments);\n      this.collection = collection;\n      this.fields = fields;\n      this.config = config;\n      if (this.insert == Graph.prototype.insert) {\n        throw new Error('Method `insert` is not adapted.');\n      }\n      if (this.update == Graph.prototype.update) {\n        throw new Error('Method `update` is not adapted.');\n      }\n      if (this.remove == Graph.prototype.remove) {\n        throw new Error('Method `remove` is not adapted.');\n      }\n      if (this.query == Graph.prototype.query) {\n        throw new Error('Method `query` is not adapted.');\n      }\n      if (this.options == Graph.prototype.options) {\n        throw new Error('Method `options` is not adapted.');\n      }\n      if (this.fetch == Graph.prototype.fetch) {\n        throw new Error('Method `fetch` is not adapted.');\n      }\n      if (this.each == Graph.prototype.each) {\n        throw new Error('Method `each` is not adapted.');\n      }\n      if (this.map == Graph.prototype.map) {\n        throw new Error('Method `map` is not adapted.');\n      }\n      if (this.on == Graph.prototype.on) {\n        throw new Error('Method `on` is not adapted.');\n      }\n    }\n    \n    /**\n     * Should insert new link into graph.\n     * If the database allows, it is recommended to return a synchronous result. This can be useful in your application. But for writing generic code, it is recommended to only use the callback result.\n     * \n     * @param {Link} link\n     * @param {Graph~insertCallback} [callback]\n     * @param {Object} [context]\n     * @return {string} [id]\n     */\n    insert(link, callback, context) {}\n    \n    /**\n     * Optional callback. If present, called with an error object as the first argument and, if no error, the unique id of inserted link as the second.\n     *\n     * @callback Graph~insertCallback\n     * @param {Error} [error]\n     * @param {string} [id]\n     */\n    \n    /**\n     * Should update to new state of modifier object link by unique id or by link query object.\n     * If the database allows, it is recommended to return a synchronous result. This can be useful in your application. But for writing generic code, it is recommended to only use the callback result.\n     * \n     * @param {string|LinkSelector} selector\n     * @param {LinkModifier} modifier\n     * @param {Graph~updateCallback} [callback]\n     * @param {Object} [context]\n     * @return {number} [count]\n     */\n    update(selector, modifier, callback, context) {}\n    \n    /**\n     * Optional callback. If present, called with an error object as the first argument and, if no error, the number of affected documents as the second.\n     *\n     * @callback Graph~updateCallback\n     * @param {Error} [error]\n     * @param {number} [count]\n     */\n    \n    /**\n     * Should remove link by unique id or by link query object.\n     * \n     * @param {string|LinkSelector} selector\n     * @param {Graph~removeCallback} [callback]\n     * @param {Object} [context]\n     */\n    remove(selector, callback, context) {}\n    \n    /**\n     * Optional callback. If present, called with an error object as the first argument.\n     *\n     * @callback Graph~removeCallback\n     * @param {Error} [error]\n     * @param {number} [count]\n     */\n    \n    /**\n     * Should generate adapter for database query for links search by unique id or by link query object.\n     * \n     * @param {string|LinkSelector} selector\n     * @return {*} query\n     */\n    query(selector) {}\n    \n    /**\n     * Should generate adapter for database options. \n     * \n     * @param {Object} [options]\n     * @return {*} options - a options suitable for the database\n     */\n    options(options) {}\n    \n    /**\n     * Find and all matching links as an Array.\n     * \n     * @param {string|LinkSelector} selector\n     * @param {SelectOptions} [options]\n     * @param {Graph~fetchCallback} [callback]\n     * @return {Link[]} links - result links objects in array\n     */\n    fetch(selector, options, callback) {}\n    \n    /**\n     * Optional callback. If present, called with an error object as the first argument and, if no error, the result links objects in array.\n     *\n     * @callback Graph~fetchCallback\n     * @param {Error} [error]\n     * @param {Link[]} [links]\n     */\n    \n    /**\n     * Get one first matching link.\n     * \n     * @param {string|LinkSelector} selector\n     * @param {SelectOptions} [options]\n     * @param {Graph~getCallback} [callback]\n     * @return {Link} link - result link object\n     */\n    get(selector, options, callback) {}\n    \n    /**\n     * Optional callback. If present, called with an error object as the first argument and, if no error, the result link object.\n     *\n     * @callback Graph~getCallback\n     * @param {Error} [error]\n     * @param {Link} [link]\n     */\n    \n    /**\n     * Should call callback once for each matching document, sequentially and synchronously.\n     * \n     * @param {string|LinkSelector} selector\n     * @param {SelectOptions} [options]\n     * @param {Graph~eachCallback} [callback]\n     */\n    each(selector, options, callback) {}\n    \n    /**\n     * @callback Graph~eachCallback\n     * @param {Link} [link]\n     */\n    \n    /**\n     * Should map callback over all matching documents. Returns an Array.\n     * \n     * @param {string|LinkSelector} selector\n     * @param {SelectOptions} [options]\n     * @param {Graph~mapCallback} [callback]\n     * @return {Array} results\n     */\n    map(selector, options, callback) {}\n    \n    /**\n     * @callback Graph~mapCallback\n     * @param {Link} [link]\n     * @return {*} result\n     */\n    \n    /**\n     * Should count all matching documents.\n     * \n     * @param {string|LinkSelector} selector\n     * @param {SelectOptions} [options]\n     * @param {Graph~countCallback} [callback]\n     * @return {number} count\n     */\n    count(selector, options, callback) {}\n    \n    /**\n     * @callback Graph~countCallback\n     * @param {Error} [error]\n     * @param {number} [count]\n     */\n    \n    /**\n     * Should subscribe to the events: link, unlink, insert, update, remove.\n     * \n     * @param {string} event - name\n     * @param {Graph~onCallback} callback\n     */\n    on(event, callback) {}\n    \n    /**\n     * @callback Graph~onCallback\n     * @param {Link} [oldLink] - can be undefined on link and insert events\n     * @param {Link} [newLink] - can be undefined on unlink and remove events\n     * @param {Object} [context] - additional app information, such as context.userId\n     */\n  };\n  \n  return Graph;\n}\n\nvar Graph = factoryGraph();\n\nexport { factoryGraph, Graph };"]}